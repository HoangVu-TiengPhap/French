<!DOCTYPE html>
<!--
Created using JS Bin
http://jsbin.com

Copyright (c) 2025 by anonymous (http://jsbin.com/xuqigixofu/1/edit)

Released under the MIT license: http://jsbin.mit-license.org
-->
<meta name="robots" content="noindex">
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài Tập Điền Từ: Passé Composé / Imparfait</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .quiz-container {
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 900px;
            padding: 30px 40px;
        }

        .quiz-header {
            text-align: center;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .quiz-header h1 {
            color: #2c3e50;
            margin: 0;
            font-size: 28px;
        }

        .info-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            font-size: 16px;
            color: #555;
            flex-wrap: wrap;
            gap: 20px;
        }

        #score-container {
            background-color: #e67e22;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 500;
        }

        .special-chars-bar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e9ecef;
        }

        .char-btn {
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.1s;
        }
        .char-btn:hover {
            background-color: #e0e0e0;
        }
        .char-btn:active {
            transform: scale(0.95);
        }
        
        .paragraph-container {
            font-size: 1.2rem;
            line-height: 3.2;
            color: #34495e;
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            border: 1px solid #e9ecef;
            border-bottom: none;
        }
        
        .translation-container {
            font-size: 1rem;
            line-height: 1.8;
            color: #555;
            background-color: #f8f9fa;
            padding: 15px 20px;
            border-radius: 0 0 8px 8px;
            border: 1px solid #e9ecef;
            border-top: 1px dashed #ccc;
            font-style: italic;
            margin-bottom: 20px;
        }

        .verb-input {
            font-family: 'Roboto', sans-serif;
            font-size: 1.1rem;
            border: none;
            border-bottom: 2px solid #3498db;
            padding: 4px 6px;
            text-align: center;
            width: 130px;
            transition: all 0.2s ease-in-out;
            background-color: transparent;
        }
        .verb-input:focus {
            outline: none;
            border-bottom: 2px solid #e67e22;
        }
        .verb-input.correct {
            border-bottom-color: #2ecc71;
            color: #2ecc71;
        }
        .verb-input.incorrect {
            border-bottom-color: #e74c3c;
            color: #e74c3c;
        }

        .feedback-span {
            font-size: 0.9rem;
            margin-left: 5px;
        }
        .feedback-span .correct-answer {
            font-weight: bold;
            color: #27ae60;
        }
        
        .feedback-explanation {
            font-size: 1rem;
            color: #34495e;
            background-color: #e8f4fd;
            border-left: 4px solid #0366d6;
            padding: 15px;
            margin-top: 20px;
            display: none;
            line-height: 1.7;
        }
        
        .feedback-explanation strong {
            font-size: 1.1rem;
        }

        .check-all-btn {
            display: block;
            width: 100%;
            padding: 18px;
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(90deg, #e67e22, #d35400);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            margin-top: 30px;
        }
        .check-all-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
        }

    </style>
</head>
<body>

    <div class="quiz-container">
        <header class="quiz-header">
            <h1>Bài Tập Kể Chuyện: Passé Composé / Imparfait</h1>
            <div class="info-bar">
                <span>Enseignant: <strong>Nguyễn Hoàng Vũ</strong></span>
                <div id="score-container">
                    Điểm: <span id="score-value">0/21</span>
                </div>
            </div>
        </header>

        <form id="quiz-form" onsubmit="return false;">
            <p style="text-align: center; font-style: italic; color: #555; margin-bottom: 20px;">
                Hoàn thành câu chuyện sau bằng cách chia các động từ trong ngoặc ở thì Passé Composé hoặc Imparfait.
            </p>

            <div id="special-chars" class="special-chars-bar">
                <button type="button" class="char-btn">à</button>
                <button type="button" class="char-btn">â</button>
                <button type="button" class="char-btn">é</button>
                <button type="button" class="char-btn">è</button>
                <button type="button" class="char-btn">ê</button>
                <button type="button" class="char-btn">ë</button>
                <button type="button" class="char-btn">î</button>
                <button type="button" class="char-btn">ï</button>
                <button type="button" class="char-btn">ô</button>
                <button type="button" class="char-btn">û</button>
                <button type="button" class="char-btn">ù</button>
                <button type="button" class="char-btn">ç</button>
            </div>

            <div class="paragraph-container">
                Philippe et son ami Yvan <input type="text" id="q1_verb1" class="verb-input" placeholder="(aller)"> <span class="feedback-span" id="q1_feedback1"></span> voir un spectacle. C' <input type="text" id="q1_verb2" class="verb-input" placeholder="(être)"> <span class="feedback-span" id="q1_feedback2"></span> un ballet. Ils <input type="text" id="q1_verb3" class="verb-input" placeholder="(savoir)"> <span class="feedback-span" id="q1_feedback3"></span> qu'il y <input type="text" id="q1_verb4" class="verb-input" placeholder="(avoir)"> <span class="feedback-span" id="q1_feedback4"></span> quelque chose de spécial dans ce ballet, mais quoi? Quand ils <input type="text" id="q1_verb5" class="verb-input" placeholder="(entrer)"> <span class="feedback-span" id="q1_feedback5"></span> dans la salle, une jeune femme <input type="text" id="q1_verb6" class="verb-input" placeholder="(accueillir)"> <span class="feedback-span" id="q1_feedback6"></span> les jeunes gens et <input type="text" id="q1_verb7" class="verb-input" placeholder="(indiquer)"> <span class="feedback-span" id="q1_feedback7"></span> à chacun sa place. Puis, ils <input type="text" id="q1_verb8" class="verb-input" placeholder="(attendre)"> <span class="feedback-span" id="q1_feedback8"></span> le début du spectacle. Ils <input type="text" id="q1_verb9" class="verb-input" placeholder="(lire)"> <span class="feedback-span" id="q1_feedback9"></span> le programme, mais il n'y <input type="text" id="q1_verb10" class="verb-input" placeholder="(avoir)"> <span class="feedback-span" id="q1_feedback10"></span> que le nom des danseurs. Ils ne <input type="text" id="q1_verb11" class="verb-input" placeholder="(connaître)"> <span class="feedback-span" id="q1_feedback11"></span> aucun de ces noms. Soudain, un homme immense <input type="text" id="q1_verb12" class="verb-input" placeholder="(venir)"> <span class="feedback-span" id="q1_feedback12"></span> s'asseoir devant Yann. Juste à ce moment-là, on <input type="text" id="q1_verb13" class="verb-input" placeholder="(éteindre)"> <span class="feedback-span" id="q1_feedback13"></span> les lumières. Yann <input type="text" id="q1_verb14" class="verb-input" placeholder="(ne plus voir)"> <span class="feedback-span" id="q1_feedback14"></span> rien et surtout il ne <input type="text" id="q1_verb15" class="verb-input" placeholder="(comprendre)"> <span class="feedback-span" id="q1_feedback15"></span> pas. Philippe <input type="text" id="q1_verb16" class="verb-input" placeholder="(mourir)"> <span class="feedback-span" id="q1_feedback16"></span> de rire, tout le monde <input type="text" id="q1_verb17" class="verb-input" placeholder="(rire)"> <span class="feedback-span" id="q1_feedback17"></span>, et Yann <input type="text" id="q1_verb18" class="verb-input" placeholder="(vouloir)"> <span class="feedback-span" id="q1_feedback18"></span> comprendre pourquoi. Alors, Philippe <input type="text" id="q1_verb19" class="verb-input" placeholder="(expliquer)"> <span class="feedback-span" id="q1_feedback19"></span> que tous les danseurs <input type="text" id="q1_verb20" class="verb-input" placeholder="(être)"> <span class="feedback-span" id="q1_feedback20"></span> nus !
            </div>
            <div class="translation-container">
                Philippe và bạn anh ấy là Yvan (đi) xem một buổi biểu diễn. Đó (là) một vở ballet. Họ (biết) rằng có điều gì đó đặc biệt trong vở ballet này, nhưng là gì? Khi họ (bước vào) trong khán phòng, một cô gái trẻ (chào đón) những chàng trai và (chỉ) cho mỗi người vị trí của mình. Sau đó, họ (chờ đợi) buổi diễn bắt đầu. Họ (đọc) chương trình, nhưng ở đó chỉ (có) tên của các vũ công. Họ không (biết) bất kỳ ai trong số những cái tên này. Đột nhiên, một người đàn ông to lớn (đến) ngồi phía trước Yann. Ngay lúc đó, người ta (tắt) đèn. Yann không (thấy) gì nữa và nhất là anh ấy không (hiểu). Philippe (cười như chết), mọi người (cười), và Yann (muốn) hiểu tại sao. Lúc đó, Philippe (giải thích) rằng tất cả các vũ công (đều) khỏa thân!
            </div>
            <div class="feedback-explanation" id="q1_explanation"></div>
            
            <button id="check-all-btn" class="check-all-btn">Kiểm tra tất cả</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const solution = {
                blanks: {
                    q1_verb1: 'sont allés',
                    q1_verb2: "était",
                    q1_verb3: 'savaient',
                    q1_verb4: 'avait',
                    q1_verb5: 'sont entrés',
                    q1_verb6: 'a accueilli',
                    q1_verb7: 'a indiqué',
                    q1_verb8: 'ont attendu',
                    q1_verb9: 'ont lu',
                    q1_verb10: "avait",
                    q1_verb11: 'connaissaient',
                    q1_verb12: 'est venu',
                    q1_verb13: 'a éteint',
                    q1_verb14: "ne voyait plus",
                    q1_verb15: 'comprenait',
                    q1_verb16: 'mourait',
                    q1_verb17: 'riait',
                    q1_verb18: 'voulait',
                    q1_verb19: 'a expliqué',
                    q1_verb20: 'étaient',
                    // The original image has 20 verbs. Let's assume the user meant 20. I will remove the 21st placeholder later.
                },
                 explanation: `
                    <strong>Phân tích:</strong><br>
                    - <strong>Hành động chính, đơn lẻ, hoàn tất (Passé Composé):</strong> <i>sont allés, sont entrés, a accueilli, a indiqué, ont attendu, ont lu, est venu, a éteint, n'a plus vu, a expliqué.</i> Đây là chuỗi các sự kiện chính, làm nên sườn của câu chuyện.<br>
                    - <strong>Bối cảnh, miêu tả, trạng thái, tình cảm (Imparfait):</strong> <i>C'était</i> (miêu tả buổi diễn), <i>savaient, y avait, ne connaissaient</i> (miêu tả trạng thái nhận thức/kiến thức), <i>ne comprenait, mourait, riait, voulait</i> (miêu tả cảm xúc, trạng thái tinh thần hoặc hành động nền đang diễn ra), <i>étaient</i> (miêu tả trạng thái của các vũ công).
                `
            };
            
            // Re-count the inputs. There are 20 inputs in the image. I'll remove the 21st.
             solution.blanks = {
                    q1_verb1: 'sont allés',
                    q1_verb2: "était",
                    q1_verb3: 'savaient',
                    q1_verb4: 'avait',
                    q1_verb5: 'sont entrés',
                    q1_verb6: 'a accueilli',
                    q1_verb7: 'a indiqué',
                    q1_verb8: 'ont attendu',
                    q1_verb9: 'ont lu',
                    q1_verb10: "avait",
                    q1_verb11: 'connaissaient',
                    q1_verb12: 'est venu',
                    q1_verb13: 'a éteint',
                    q1_verb14: "ne voyait plus",
                    q1_verb15: 'comprenait',
                    q1_verb16: 'mourait',
                    q1_verb17: 'riait',
                    q1_verb18: 'voulait',
                    q1_verb19: 'a expliqué',
                    q1_verb20: 'étaient'
            };


            const checkButton = document.getElementById('check-all-btn');
            const scoreValueElement = document.getElementById('score-value');
            const totalBlanks = Object.keys(solution.blanks).length;
             scoreValueElement.textContent = `0/${totalBlanks}`;
            let currentScore = 0;
            let lastActiveInput = null;

            // --- Logic for Special Character Buttons ---
            const charButtons = document.querySelectorAll('.char-btn');
            const verbInputs = document.querySelectorAll('.verb-input');

            verbInputs.forEach(input => {
                input.addEventListener('focus', (event) => {
                    lastActiveInput = event.target;
                });
            });
            
            charButtons.forEach(button => {
                button.addEventListener('click', () => {
                    if (lastActiveInput) {
                        const charToInsert = button.textContent;
                        const input = lastActiveInput;
                        const startPos = input.selectionStart;
                        const endPos = input.selectionEnd;
                        const originalValue = input.value;
                        
                        input.value = originalValue.substring(0, startPos) + charToInsert + originalValue.substring(endPos);
                        
                        const newPos = startPos + 1;
                        input.selectionStart = newPos;
                        input.selectionEnd = newPos;
                        input.focus();
                    }
                });
            });


            // --- Logic for Checking Answers ---
            checkButton.addEventListener('click', () => {
                currentScore = 0;
                
                const explanationElement = document.getElementById('q1_explanation');
                
                Object.keys(solution.blanks).forEach(blankId => {
                    const inputElement = document.getElementById(blankId);
                    const feedbackElement = document.getElementById(blankId.replace('verb', 'feedback'));
                    const userAnswer = inputElement.value.trim();
                    const correctAnswer = solution.blanks[blankId];

                    let correctAnswers = Array.isArray(correctAnswer) ? correctAnswer : [correctAnswer];
                    
                    // Specific case for C'était
                    if (correctAnswer.toLowerCase() === "c'était") {
                        correctAnswers.push("c'était");
                    }

                    if (correctAnswers.map(ans => ans.toLowerCase()).includes(userAnswer.toLowerCase())) {
                        currentScore++;
                        inputElement.value = correctAnswers[0]; // Auto-correct to the primary version
                        inputElement.classList.add('correct');
                        feedbackElement.innerHTML = '✔️';
                    } else {
                        inputElement.classList.add('incorrect');
                        feedbackElement.innerHTML = `❌ <span class="correct-answer">${correctAnswers[0]}</span>`;
                    }
                    inputElement.disabled = true;
                });
                
                explanationElement.innerHTML = solution.explanation;
                explanationElement.style.display = 'block';

                scoreValueElement.textContent = `${currentScore}/${totalBlanks}`;
                checkButton.disabled = true;
            });
        });
    </script>
</body>
</html>